import{_ as C,B as A,b as p,A as o,l as h,P as d,h as I,i as R,C as B,g as b,T as E,c as e,a as s,F as S,x as T,t as f,D as j,u as L,o as l,E as x,y as V,e as D,f as N,z,G as F}from"./index.4f83206e.js";const G={setup(){const i=F(),a=L();async function g(){try{const t=i.params.playlistId;await I.getPlaylistById(t)}catch(t){d.error(t,"Getting playlist by ID ERROR"),a.push("/")}}return A(()=>{i.params.playlistId&&g()}),{account:p(()=>o.account),playlist:p(()=>o.playlist),tracks:p(()=>{var t;return(t=o.playlist)==null?void 0:t.tracks}),likedPlaylists:p(()=>o.likedPlaylists),foundLiked:p(()=>o.likedPlaylists.find(t=>t.accountId==o.account.id)),async deletePlaylist(){try{const t=o.playlist.id;if(h.log("playlist Id we will delete",t),!await d.confirm("Are sure you sure you want to delete this playlist?"))return;await I.deletePlaylist(t),a.push({name:"Home"})}catch{d.error(Error,"Removing Playlist")}},goToProfileByCreatorId(){const t=o.playlist.creatorId;a.push({name:"Profile",params:{profileId:t}})},async addPlaylistToSpotify(){try{const t=o.playlist.tracks.map(n=>"spotify:track:"+n.id);h.log(t,"right format?");const c=await R.put("api/spotify/playlists",{playlistName:`${o.playlist.name}`,tracks:t});d.toast("Added to Spotify","success")}catch{d.error(Error,"Removing Playlist")}},async likePlaylist(t){try{h.log("liking playlist"),await B.likePlaylist(t)}catch(c){d.error("[SAVE PLAYLIST]",c.message)}},convertToTime(t){const c=Math.floor(t),n=Math.round((t-c)*60),u=n<10?`0${n}`:`${n}`;return`${c}m ${u}s`},async login(){b.loginWithPopup()},async logout(){b.logout({returnTo:window.location.origin})}}},components:{TrackCard:E}},y=i=>(D("data-v-d5275848"),i=i(),N(),i),M={class:"container-fluid"},H={class:"row justify-content-center"},O={class:"col-10 col-md-5 my-5 bigcardbg"},W={class:"row text-light justify-content-between"},Y={class:"col-6"},q={class:"row"},J=["src"],K={class:"col-6 p-2 d-flex flex-column justify-content-between"},Q={class:"row"},U={class:""},X={class:"row justify-content-between"},Z={class:"col-8 p-0 d-flex align-items-center"},$=y(()=>s("div",{class:"fs-5"}," Add to\xA0 ",-1)),tt=y(()=>s("i",{title:"spotify",class:"mdi mdi-spotify fs-4"},null,-1)),st=[$,tt],ot={class:"col-4 p-0 d-flex justify-content-center"},et={key:0,class:"text-end"},lt=y(()=>s("i",{class:"mdi mdi-trash-can heart"},null,-1)),at=[lt],it={key:1,class:"text-end"},ct={key:0,class:"btn p-0"},nt=y(()=>s("i",{class:"mdi mdi-heart-outline heart"},null,-1)),rt=[nt],dt={key:1},yt=y(()=>s("i",{class:"mdi mdi-heart heart"},null,-1)),_t=[yt],pt=y(()=>s("div",{class:"row py-3"},null,-1));function ut(i,a,g,t,c,n){var m,v,k,P,w;const u=z("TrackCard");return l(),e("div",M,[s("div",H,[s("div",O,[s("div",W,[s("div",Y,[s("div",q,[(l(!0),e(S,null,T((m=t.playlist)==null?void 0:m.tracks.slice(0,4),(r,_)=>(l(),e("div",{key:_,class:x(["col-6 p-0",t.playlist.tracks.length<4&&(_===1||_===3)?"col-12 p-0":""])},[s("img",{src:r.albumImg,alt:"",class:x(["img-fluid smallalbumcover",_===0?"topleftphoto":_===2?"bottomleftphoto":""])},null,10,J)],2))),128))])]),s("div",K,[s("div",Q,[s("b",U,f((v=t.playlist)==null?void 0:v.name),1),s("div",null," Tempo: "+f((k=t.playlist)==null?void 0:k.tempo)+" bpm ",1),s("div",null," Runtime: "+f(t.convertToTime(((P=t.playlist)==null?void 0:P.runtime)/60)),1)]),s("div",X,[s("div",Z,[t.account.id?(l(),e("div",{key:0,onClick:a[0]||(a[0]=r=>t.addPlaylistToSpotify()),class:"btn text-light d-flex"},st)):j("",!0)]),s("div",ot,[t.account.id==((w=t.playlist)==null?void 0:w.creatorId)?(l(),e("div",et,[s("button",{onClick:a[1]||(a[1]=r=>t.deletePlaylist()),class:"btn p-0"},at)])):(l(),e("div",it,[t.foundLiked?(l(),e("button",dt,_t)):(l(),e("button",ct,rt))]))])])])])])]),(l(!0),e(S,null,T(t.tracks,r=>(l(),e("div",{key:r.id,class:"row justify-content-center"},[V(u,{track:r},null,8,["track"])]))),128)),pt])}const ht=C(G,[["render",ut],["__scopeId","data-v-d5275848"]]);export{ht as default};
